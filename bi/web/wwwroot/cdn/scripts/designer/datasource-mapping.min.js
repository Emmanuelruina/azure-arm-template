/*!
*  filename: datasource-mapping.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function doneBtnClick(){this.uploadInstance.validateAndSave()}function onBackBtnClick(){showNextButton(!0);this.uploadInstance.navigateBackwards()}function onNextBtnClick(){this.uploadInstance.initiateUpload();var n=$("#upload_item_dialog").is(":visible")?"upload_item_dialog":"upload_item_status_dialog";ejs.popups.createSpinner({target:document.getElementById(n)});ejs.popups.setSpinner({type:"Material"});ejs.popups.showSpinner(document.getElementById(n))}function onActionBegin(n){switch(n.eventType){case"initiateUpload":var t=n.source.data;updateStatus(t)}}function updateStatus(n){$.ajax({type:"POST",url:updateUploadStatusUrl,data:{uploadStatusData:JSON.stringify(n)},success:function(n){n.Status&&onUploadStatusClick()}})}function onActionComplete(n){var i,t;switch(n.eventType){case"navigate":n.source.data.target==="datasourceConfiguration"?(i=$("#upload_item_dialog").is(":visible")?"upload_item_dialog":"upload_item_status_dialog",t=document.getElementById(i).ej2_instances,t[0].header='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.Localization.DatSourceMapping.format(window.Server.App.Localization.UploadDashboard)+"<\/span><\/span>",t[0].buttons=[{click:function(){onBackBtnClick()},buttonModel:{cssClass:"app-btn-secondary pull-left",content:window.Server.App.Localization.Back}},{click:function(){doneBtnClick()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.DoneButton}}],t[0].show()):n.source.data.target==="datasourceListing"&&showNextButton(!0);break;case"uploadDatasourceConfig":n.source.data.configurationComplete?showNextButton(!1):showNextButton(!0);break;case"isValidFile":n.source.data.isValidFile?(updateFileValidation(),i=$("#upload_item_dialog").is(":visible")?"upload_item_dialog":"upload_item_status_dialog",t=document.getElementById(i).ej2_instances,t[0].header='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.Localization.DatSourceMapping.format(window.Server.App.Localization.UploadDashboard)+"<\/span><\/span>"):uploadDashboardItem(!0)}}function showNextButton(n){var i=$("#upload_item_dialog").is(":visible")?"upload_item_dialog":"upload_item_status_dialog",t=document.getElementById(i).ej2_instances;t[0].header='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.Localization.DatSourceMapping.format(window.Server.App.Localization.UploadDashboard)+"<\/span><\/span>";t[0].buttons=[{click:function(){onNextBtnClick()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",disabled:n,content:window.Server.App.Localization.Next}},{click:function(){$("#uploaddashbord-id").val("");t[0].hide();parent.document.getElementById("upload-popup-container").style.display="none";parent.document.getElementById("common-overlay").style.display="none";refreshListingPage()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}];t[0].show()}var bbdesigner$=$,uploadInstance;window.bb$!==undefined&&(bbdesigner$=window.bb$);uploadInstance=null;$(document).ready(function(){var n=$('meta[name="designer_service:url"]').attr("content"),t=$('meta[name="dashboard_service:url"]').attr("content"),i=$('meta[name="dashboard:id"]').attr("content"),r=$('meta[name="category:id"]').attr("content"),u=$('meta[name="dashboard:name"]').attr("content"),f=$('meta[name="dashboard:description"]').attr("content"),e=$('meta[name="access:token"]').attr("content"),o={serverUrl:t,serviceAuthorizationToken:e,serviceUrl:n,uploadId:i,name:u,description:f,categoryId:r,canCreateDS:canCreateDS,environment:isSelfHosted?"onpremise":"cloud",actionBegin:bbdesigner$.proxy(onActionBegin,this),actionComplete:bbdesigner$.proxy(onActionComplete,this)};uploadInstance=new BoldBIDashboard.Upload($("#data_source_mapping"),o)})